<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}Admin Panel{% endblock %} — Portfolio</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
:root{
  --font-display:'Playfair Display',serif;
  --font-body:'DM Sans',sans-serif;
  --bg:#f8f5f0;--surface:#ffffff;--surface2:#f0ece6;--border:#e5ddd5;
  --text:#1a1410;--text-muted:#6b5f54;--accent:#c8621a;--accent-2:#2563eb;
  --accent-glow:rgba(200,98,26,.12);--card-shadow:0 4px 24px rgba(0,0,0,.08);
  --sidebar-w:260px;
}
[data-theme="dark"]{
  --bg:#0f0e0c;--surface:#1a1815;--surface2:#231f1b;--border:#2e2924;
  --text:#f5f0eb;--text-muted:#9a8e84;--accent:#e8824a;--accent-2:#60a5fa;
  --accent-glow:rgba(232,130,74,.12);--card-shadow:0 4px 32px rgba(0,0,0,.4);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{background:var(--bg);color:var(--text);font-family:var(--font-body);display:flex;min-height:100vh;}
a{color:var(--accent);text-decoration:none;}

/* ── Sidebar ─────────────────────── */
.sidebar{width:var(--sidebar-w);min-height:100vh;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;position:fixed;top:0;left:0;z-index:100;transition:transform .3s;}
.sidebar-brand{padding:1.75rem 1.5rem;border-bottom:1px solid var(--border);}
.sidebar-brand-name{font-family:var(--font-display);font-size:1.2rem;font-weight:900;color:var(--text);}
.sidebar-brand-sub{font-size:.75rem;color:var(--text-muted);margin-top:.2rem;}
.sidebar-nav{padding:1rem 0;flex:1;overflow-y:auto;}
.nav-section{padding:.5rem 1.5rem .25rem;font-size:.7rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--text-muted);}
.nav-item{display:flex;align-items:center;gap:.75rem;padding:.65rem 1.5rem;font-size:.9rem;font-weight:500;color:var(--text-muted);transition:all .18s;position:relative;}
.nav-item:hover{color:var(--accent);background:var(--accent-glow);}
.nav-item.active{color:var(--accent);background:var(--accent-glow);}
.nav-item.active::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;background:var(--accent);border-radius:0 3px 3px 0;}
.nav-item i{width:20px;text-align:center;}
.sidebar-footer{padding:1.25rem 1.5rem;border-top:1px solid var(--border);display:flex;align-items:center;gap:.75rem;}
.sidebar-footer-avatar{width:36px;height:36px;border-radius:50%;background:var(--accent-glow);border:2px solid var(--accent);display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:700;font-size:.9rem;}
.sidebar-footer-name{font-weight:600;font-size:.9rem;}
.sidebar-footer-role{font-size:.75rem;color:var(--text-muted);}

/* ── Main ────────────────────────── */
.main{margin-left:var(--sidebar-w);flex:1;display:flex;flex-direction:column;min-height:100vh;}
.topbar{background:var(--surface);border-bottom:1px solid var(--border);padding:.9rem 2rem;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:90;}
.topbar-title{font-family:var(--font-display);font-size:1.2rem;font-weight:700;}
.topbar-actions{display:flex;align-items:center;gap:.75rem;}
.page-content{padding:2rem;flex:1;}

/* ── Cards ───────────────────────── */
.card{background:var(--surface);border:1px solid var(--border);border-radius:16px;box-shadow:var(--card-shadow);}
.card-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;}
.card-title{font-family:var(--font-display);font-size:1.1rem;font-weight:700;}
.card-body{padding:1.5rem;}

/* ── Buttons ─────────────────────── */
.btn{display:inline-flex;align-items:center;gap:.5rem;padding:.6rem 1.3rem;border-radius:10px;font-size:.88rem;font-weight:600;cursor:pointer;transition:all .18s;border:none;font-family:var(--font-body);}
.btn-primary{background:var(--accent);color:#fff;}
.btn-primary:hover{opacity:.85;color:#fff;}
.btn-outline{background:transparent;border:1.5px solid var(--border);color:var(--text-muted);}
.btn-outline:hover{border-color:var(--accent);color:var(--accent);}
.btn-sm{padding:.4rem .9rem;font-size:.8rem;}
.btn-danger{background:#ef4444;color:#fff;}
.btn-danger:hover{background:#dc2626;color:#fff;}
.btn-success{background:#16a34a;color:#fff;}
.btn-success:hover{background:#15803d;color:#fff;}

/* ── Forms ───────────────────────── */
.form-group{margin-bottom:1.25rem;}
.form-label{display:block;font-size:.85rem;font-weight:600;margin-bottom:.4rem;color:var(--text);}
.form-control{width:100%;padding:.7rem 1rem;background:var(--surface2);border:1.5px solid var(--border);border-radius:10px;color:var(--text);font-family:var(--font-body);font-size:.9rem;outline:none;transition:border .2s,box-shadow .2s;}
.form-control:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-glow);}
.form-control::placeholder{color:var(--text-muted);}
textarea.form-control{resize:vertical;min-height:100px;}
.form-grid-2{display:grid;grid-template-columns:1fr 1fr;gap:1rem;}
.form-hint{font-size:.77rem;color:var(--text-muted);margin-top:.3rem;}
.form-check{display:flex;align-items:center;gap:.5rem;cursor:pointer;}
.form-check input{accent-color:var(--accent);width:16px;height:16px;cursor:pointer;}

/* ── Table ───────────────────────── */
.table-wrap{overflow-x:auto;}
table{width:100%;border-collapse:collapse;font-size:.88rem;}
th{text-align:left;padding:.85rem 1rem;border-bottom:2px solid var(--border);color:var(--text-muted);font-size:.78rem;font-weight:700;letter-spacing:.05em;text-transform:uppercase;}
td{padding:.85rem 1rem;border-bottom:1px solid var(--border);vertical-align:middle;}
tr:last-child td{border-bottom:none;}
tr:hover td{background:var(--surface2);}
.table-img{width:52px;height:52px;object-fit:cover;border-radius:10px;border:1px solid var(--border);}
.table-img-ph{width:52px;height:52px;border-radius:10px;background:var(--surface2);display:flex;align-items:center;justify-content:center;color:var(--border);}

/* ── Stats ───────────────────────── */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.25rem;margin-bottom:2rem;}
.stat-card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:1.4rem;box-shadow:var(--card-shadow);display:flex;align-items:center;gap:1rem;}
.stat-icon{width:52px;height:52px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:1.4rem;}
.stat-num{font-family:var(--font-display);font-size:1.8rem;font-weight:900;line-height:1;}
.stat-label{font-size:.82rem;color:var(--text-muted);margin-top:.2rem;}

/* ── Flash ───────────────────────── */
.flash-container{position:fixed;top:1.5rem;right:1.5rem;z-index:1200;display:flex;flex-direction:column;gap:.5rem;}
.flash{padding:.75rem 1.25rem;border-radius:10px;font-size:.88rem;font-weight:500;box-shadow:var(--card-shadow);animation:slideIn .3s ease;display:flex;align-items:center;gap:.6rem;}
.flash.success{background:#d1fae5;color:#065f46;border:1px solid #6ee7b7;}
.flash.error{background:#fee2e2;color:#991b1b;border:1px solid #fca5a5;}
[data-theme="dark"] .flash.success{background:#064e3b;color:#6ee7b7;border-color:#065f46;}
[data-theme="dark"] .flash.error{background:#7f1d1d;color:#fca5a5;border-color:#991b1b;}
@keyframes slideIn{from{opacity:0;transform:translateX(20px);}to{opacity:1;transform:translateX(0);}}

/* ── Badge ───────────────────────── */
.badge{display:inline-flex;align-items:center;padding:.2rem .65rem;border-radius:100px;font-size:.75rem;font-weight:600;gap:.3rem;}
.badge-accent{background:var(--accent-glow);color:var(--accent);border:1px solid var(--accent);}
.badge-green{background:rgba(22,163,74,.12);color:#16a34a;border:1px solid #16a34a;}
.badge-blue{background:rgba(37,99,235,.1);color:#2563eb;border:1px solid #2563eb;}

/* Thumb prev */
.thumb{width:60px;height:60px;object-fit:cover;border-radius:8px;border:1px solid var(--border);}

/* Theme btn */
.theme-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);width:38px;height:38px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.95rem;transition:all .2s;}
.theme-btn:hover{border-color:var(--accent);color:var(--accent);}

/* Mobile */
@media(max-width:768px){
  .sidebar{transform:translateX(-100%);}
  .sidebar.open{transform:none;}
  .main{margin-left:0;}
  .form-grid-2{grid-template-columns:1fr;}
}
</style>
</head>
<body>

<!-- Sidebar -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-brand">
    <div class="sidebar-brand-name">Port<span style="color:var(--accent)">.</span>folio</div>
    <div class="sidebar-brand-sub">Admin Panel</div>
  </div>
  <nav class="sidebar-nav">
    <div class="nav-section">Main</div>
    <a href="{{ url_for('admin_dashboard') }}" class="nav-item {% if request.endpoint=='admin_dashboard' %}active{% endif %}"><i class="fas fa-home"></i> Dashboard</a>
    <a href="{{ url_for('index') }}" target="_blank" class="nav-item"><i class="fas fa-eye"></i> View Portfolio</a>
    <div class="nav-section">Manage</div>
    <a href="{{ url_for('admin_personal') }}" class="nav-item {% if request.endpoint=='admin_personal' %}active{% endif %}"><i class="fas fa-user"></i> Personal Info</a>
    <a href="{{ url_for('admin_education') }}" class="nav-item {% if request.endpoint=='admin_education' %}active{% endif %}"><i class="fas fa-graduation-cap"></i> Education</a>
    <a href="{{ url_for('admin_experience') }}" class="nav-item {% if request.endpoint=='admin_experience' %}active{% endif %}"><i class="fas fa-briefcase"></i> Experience</a>
    <a href="{{ url_for('admin_projects') }}" class="nav-item {% if request.endpoint in ['admin_projects','admin_projects_edit'] %}active{% endif %}"><i class="fas fa-code"></i> Projects</a>
    <a href="{{ url_for('admin_certificates') }}" class="nav-item {% if request.endpoint=='admin_certificates' %}active{% endif %}"><i class="fas fa-certificate"></i> Certificates</a>
    <div class="nav-section">Account</div>
    <a href="{{ url_for('admin_logout') }}" class="nav-item" style="color:#ef4444"><i class="fas fa-sign-out-alt"></i> Logout</a>
  </nav>
  <div class="sidebar-footer">
    <div class="sidebar-footer-avatar">A</div>
    <div><div class="sidebar-footer-name">Admin</div><div class="sidebar-footer-role">Portfolio Manager</div></div>
  </div>
</aside>

<!-- Main -->
<div class="main">
  <div class="topbar">
    <div style="display:flex;align-items:center;gap:1rem;">
      <button class="theme-btn" onclick="document.getElementById('sidebar').classList.toggle('open')" style="display:none;id:mobileMenu"><i class="fas fa-bars"></i></button>
      <span class="topbar-title">{% block page_title %}Dashboard{% endblock %}</span>
    </div>
    <div class="topbar-actions">
      <button class="theme-btn" onclick="toggleTheme()"><i class="fas fa-sun" id="themeIcon"></i></button>
    </div>
  </div>
  <div class="page-content">
    {% block content %}{% endblock %}
  </div>
</div>

<!-- Flash -->
<div class="flash-container">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% for cat, msg in messages %}
    <div class="flash {{ cat }}"><i class="fas fa-{% if cat=='success' %}check-circle{% else %}exclamation-circle{% endif %}"></i>{{ msg }}</div>
    {% endfor %}
  {% endwith %}
</div>

<script>
function toggleTheme(){
  const html=document.documentElement,isDark=html.getAttribute('data-theme')==='dark';
  html.setAttribute('data-theme',isDark?'light':'dark');
  document.getElementById('themeIcon').className=isDark?'fas fa-sun':'fas fa-moon';
  localStorage.setItem('theme',isDark?'light':'dark');
}
(function(){
  const t=localStorage.getItem('theme')||'light';
  document.documentElement.setAttribute('data-theme',t);
  document.getElementById('themeIcon').className=t==='dark'?'fas fa-moon':'fas fa-sun';
})();
setTimeout(()=>document.querySelectorAll('.flash').forEach(f=>f.style.opacity='0'),4000);
</script>
{% block extra_js %}{% endblock %}
</body>
</html>
