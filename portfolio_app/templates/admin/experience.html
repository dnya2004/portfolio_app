{% extends "admin/base.html" %}
{% block title %}Experience{% endblock %}
{% block page_title %}Work Experience{% endblock %}

{% block content %}
<div style="display:grid;grid-template-columns:1fr 380px;gap:1.5rem;align-items:start;">

  <!-- List -->
  <div class="card">
    <div class="card-header">
      <span class="card-title"><i class="fas fa-briefcase" style="margin-right:.5rem;color:var(--accent)"></i>Experience Records</span>
      <span class="badge badge-accent">{{ items|length }}</span>
    </div>
    {% if items %}
    <div class="table-wrap">
      <table>
        <thead><tr><th>Logo</th><th>Role</th><th>Company</th><th>Period</th><th>Actions</th></tr></thead>
        <tbody>
          {% for exp in items %}
          <tr>
            <td>{% if exp.logo %}<img class="table-img" src="{{ url_for('static', filename=exp.logo) }}" alt="">{% else %}<div class="table-img-ph"><i class="fas fa-building"></i></div>{% endif %}</td>
            <td><strong>{{ exp.role }}</strong></td>
            <td>{{ exp.company }}</td>
            <td style="font-size:.82rem;white-space:nowrap">
              {{ exp.start_date }} â€“
              {% if exp.current %}<span class="badge badge-green">Present</span>{% else %}{{ exp.end_date }}{% endif %}
            </td>
            <td><a href="{{ url_for('admin_experience_delete', id=exp.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Delete?')"><i class="fas fa-trash"></i></a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="card-body" style="text-align:center;padding:3rem;color:var(--text-muted)">
      <i class="fas fa-briefcase" style="font-size:3rem;opacity:.3;margin-bottom:1rem;display:block"></i>
      <p>No experience records yet.</p>
    </div>
    {% endif %}
  </div>

  <!-- Add Form -->
  <div class="card">
    <div class="card-header"><span class="card-title"><i class="fas fa-plus" style="margin-right:.5rem;color:var(--accent)"></i>Add Experience</span></div>
    <div class="card-body">
      <form method="POST" action="{{ url_for('admin_experience_add') }}" enctype="multipart/form-data">
        <div class="form-group">
          <label class="form-label">Job Role / Title *</label>
          <input class="form-control" type="text" name="role" placeholder="Software Engineer" required>
        </div>
        <div class="form-group">
          <label class="form-label">Company *</label>
          <input class="form-control" type="text" name="company" placeholder="Google / Startup XYZ" required>
        </div>
        <div class="form-grid-2">
          <div class="form-group">
            <label class="form-label">Start Date</label>
            <input class="form-control" type="text" name="start_date" placeholder="Jun 2022">
          </div>
          <div class="form-group">
            <label class="form-label">End Date</label>
            <input class="form-control" type="text" name="end_date" placeholder="May 2023">
          </div>
        </div>
        <div class="form-group">
          <label class="form-check">
            <input type="checkbox" name="current">
            <span style="font-weight:500">Currently Working Here</span>
          </label>
        </div>
        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea class="form-control" name="description" rows="4" placeholder="Key responsibilities, achievements, technologies used..."></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Company Logo</label>
          <input class="form-control" type="file" name="logo" accept="image/*">
        </div>
        <button class="btn btn-primary" type="submit" style="width:100%;justify-content:center"><i class="fas fa-plus"></i> Add Experience</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
